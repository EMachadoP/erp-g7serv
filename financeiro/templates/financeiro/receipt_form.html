{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
 <nav aria-label="breadcrumb">
 <ol class="breadcrumb">
 <li class="breadcrumb-item"><a href="{% url 'financeiro:dashboard' %}">Início</a></li>
 <li class="breadcrumb-item"><a href="{% url 'financeiro:receipt_list' %}">Recibos</a></li>
 <li class="breadcrumb-item active" aria-current="page">Novo Recibo Avulso</li>
 </ol>
 </nav>

 <h2>Novo Recibo Avulso</h2>

 <form method="post" class="mt-4">
 {% csrf_token %}

 <div class="card">
 <div class="card-header bg-white border-bottom-0 pt-4 ps-4">
 <h5 class="card-title text-secondary">Dados do Recibo</h5>
 <hr>
 </div>
 <div class="text-muted small mb-1">Dados do Recebedor</div>
 <div class="fw-bold text-uppercase">G7 SERVIÇOS E COMÉRCIO DE PRODUTOS ELETRÔNICOS LTDA <span
 class="text-muted fw-normal">(23.037.411/0001-57)</span></div>
 </div>
</div>

<div class="row mb-3">
 <div class="col-md-6">
 <div class="mb-3">
 <label for="{{ form.person.id_for_label }}" class="form-label text-danger">Pessoa * <i
 class="bi bi-info-circle-fill text-primary"></i></label>
 {{ form.person }}
 </div>
 <div class="row">
 <div class="col-md-6">
 <label for="{{ form.amount.id_for_label }}" class="form-label text-danger">Valor
 *</label>
 <div class="input-group">
 <span class="input-group-text bg-white">R$</span>
 {{ form.amount }}
 </div>
 </div>
 <div class="col-md-6">
 <label for="{{ form.issue_date.id_for_label }}" class="form-label text-danger">Data de
 Emissão *</label>
 <div class="input-group">
 {{ form.issue_date }}
 <span class="input-group-text bg-white"><i class="bi bi-calendar"></i></span>
 </div>
 </div>
 </div>
 </div>
 <div class="col-md-6">
 <div class="border rounded p-3 h-100 d-flex align-items-center text-muted">
 <div>
 <i class="bi bi-geo-alt-fill fs-4 me-2"></i>
 <div>
 <strong>Endereço</strong><br>
 <span id="address-display">Não selecionado</span>
 </div>
 </div>
 </div>
 </div>
</div>

<div class="mb-4">
 <label for="{{ form.description.id_for_label }}" class="form-label text-danger">Descrição *</label>
 {{ form.description }}
</div>

<hr>

<div class="d-flex align-items-center">
 <button type="submit" class="btn btn-warning text-white me-3">Gerar Recibo</button>
 <span class="text-muted">ou <a href="{% url 'financeiro:receipt_list' %}" class="text-decoration-none">voltar à
 listagem</a></span>
</div>
</div>
</div>
</form>
</div>

<script>
 // Simple script to update address display when person is selected
 // Note: In a real implementation, this would need an API endpoint to fetch the person's address
 // For now, we'll just show a placeholder or try to use data attributes if we rendered them
 document.getElementById('{{ form.person.id_for_label }}').addEventListener('change', function () {
 // Placeholder for address update logic
 // document.getElementById('address-display').innerText = 'Carregando...';
 });
</script>
{% endblock %}